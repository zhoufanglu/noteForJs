<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<script>
  //参考https://juejin.im/post/6844904001100578830
  /**********************二分查找****遇到重复的对象就不行*******************/
  //1,2,3,4,   5,   6,7,8,9
  const arr = [1,2,2,2,3,4,5,6,7,8,9]
  console.log(13, findValIndex(2, arr))
  console.log('-------------')
  function findValIndex(target, arr) {
    let left = 0, right = arr.length-1
    while(left<=right){
      let len = left + right
      let mid = len%2===0?parseInt(len/2): parseInt(len/2)+1
      if(arr[mid] === target){
        return mid
      }else if(arr[mid] > target){ //向前查找
        right = mid-1
      }else if(arr[mid] < target){ //向后查找
        left = mid+1
        console.log('-',left, right)
        //break
      }
    }
  }


  /**********************二分查找****进阶版本*******************/
    //1,2,3,4,   5,   6,7,8,9
  const arr2 = [0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 5, 5, 6, 7, 8, 9],target = 0
  console.log(`--------进阶-----查找${arr2.join(',')}，----值为${target}`)
  findValIndex2(target, arr2)
  function findValIndex2(target, arr) {
    let left = 0, right = arr.length-1, count = 1
    while(left<=right){
      let mid = left + right >>> 1
      console.log(43, `第${count}次查找索引, 起点${left},  中间点${mid},   终点${right}`)
      count++
      console.log('--------------')

      if (arr[mid] === target) {
        console.log(`找到了，索引为${mid}`)
        //判断是否为左边界，如果是，直接输出， 如果不是，向左偏移
        if (mid === left) {
          return mid
        }else{
          right = mid
        }
      } else if (arr[mid] > target) { //向前查找
        right = mid - 1
      } else if (arr[mid] < target) { //向后查找
        left = mid + 1
        //break
      }
    }
    console.log('~~~~', right)
  }

</script>
</body>
</html>