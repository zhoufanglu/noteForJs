<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input id="inputEl" type="text" value="1">
<button id="btn_1">set</button>
<button id="btn_2">get</button>
<button id="add_btn">add</button>
<span></span>
</body>
<script>
  /**
   *
   * Object.defineProperty(obj, prop, descriptor)
   * ? obj 定义的对象，
   * ? prop 要定义或者修改的属性的名称
   * ? descriptor: 将被定义或修改的属性的描述符
   * ? descriptor 属性
   *   * configurable 是否可以修改
   *   * enumerable 是否枚举
   *   * value 对应的值
   *   * writable 为true时， 可以被赋值运算符改变
   *   * get 该方法返回值被用作属性值
   *   * set 该方法将接受唯一参数，并将该参数的新值分配给该属性。默认为 undefined
   */
  let obj = {
    inputValue: 0
  };
  // let value = 1
  /*Object.defineProperty(obj, "inputValue", {
    get() {
      console.log('get')
      return obj.inputValue
    },
    set(newValue) {
      obj.inputValue = newValue
      document.querySelector('#inputEl').value = obj.inputValue
    },
    // writable : true,
    enumerable : true,
    configurable : true
  });*/

  watch(obj, 'inputValue', (value)=>{
    document.querySelector('#inputEl').value = value
  })

  function watch(obj, prop, fn) {
    let value = obj[prop]
    Object.defineProperty(obj, prop, {
      get() {
        return value
      },
      set(newValue) {
        value = newValue
        fn(newValue)
      }
    })
  }

  document.querySelector('#add_btn').addEventListener('click', ()=>{
    obj.inputValue++
    console.log(66, obj.inputValue)
  })

</script>
</html>
